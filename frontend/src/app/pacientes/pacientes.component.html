<div class="ficha-container">
  <h1>Prontuário Eletrônico</h1>

  <form #pacienteForm="ngForm" (ngSubmit)="adicionarPaciente()" class="paciente-form" autocomplete="off">
    <mat-form-field appearance="fill">
      <mat-label>Nome</mat-label>
      <input matInput name="nome" [(ngModel)]="novoPaciente.nome" required />
    </mat-form-field>
    <mat-form-field appearance="fill">
      <mat-label>Nome da mãe</mat-label>
      <input matInput name="mae" [(ngModel)]="novoPaciente.mae" required />
    </mat-form-field>
    <mat-form-field appearance="fill">
      <mat-label>Data de Nascimento</mat-label>
      <input matInput name="nascimento" [(ngModel)]="novoPaciente.nascimento" type="date" required />
    </mat-form-field>
    <mat-form-field appearance="fill">
      <mat-label>Sexo</mat-label>
      <mat-select name="sexo" [(ngModel)]="novoPaciente.sexo" required>
        <mat-option value="M">Masculino</mat-option>
        <mat-option value="F">Feminino</mat-option>
        <mat-option value="I">Ignorad0o</mat-option>
      </mat-select>
    </mat-form-field>
    <mat-form-field appearance="fill">
      <mat-label>Estado Civil</mat-label>
      <mat-select name="estadoCivil" [(ngModel)]="novoPaciente.estadoCivil">
        <mat-option value="Solteiro(a)">Solteiro(a)</mat-option>
        <mat-option value="Casado(a)">Casado(a)</mat-option>
        <mat-option value="Viúvo(a)">Viúvo(a)</mat-option>
        <mat-option value="Divorciado(a)">Divorciado(a)</mat-option>
        <mat-option value="Ignorado">Ignorado</mat-option>
      </mat-select>
    </mat-form-field>
    <mat-form-field appearance="fill">
      <mat-label>Profissão</mat-label>
      <input matInput name="profissao" [(ngModel)]="novoPaciente.profissao" />
    </mat-form-field>
    <mat-form-field appearance="fill">
      <mat-label>Escolaridade</mat-label>
      <input matInput name="escolaridade" [(ngModel)]="novoPaciente.escolaridade" />
    </mat-form-field>
    <mat-form-field appearance="fill">
      <mat-label>Raça/Cor</mat-label>
      <mat-select name="raca" [(ngModel)]="novoPaciente.raca">
        <mat-option value="Branca">Branca</mat-option>
        <mat-option value="Preta">Preta</mat-option>
        <mat-option value="Parda">Parda</mat-option>
        <mat-option value="Amarela">Amarela</mat-option>
        <mat-option value="Indígena">Indígena</mat-option>
        <mat-option value="Ignorado">Ignorado</mat-option>
      </mat-select>
    </mat-form-field>
    <mat-form-field appearance="fill">
      <mat-label>Endereço</mat-label>
      <input matInput name="endereco" [(ngModel)]="novoPaciente.endereco" />
    </mat-form-field>
    <mat-form-field appearance="fill">
      <mat-label>Bairro</mat-label>
      <input matInput name="bairro" [(ngModel)]="novoPaciente.bairro" />
    </mat-form-field>
    <mat-form-field appearance="fill">
      <mat-label>Município</mat-label>
      <input matInput name="municipio" [(ngModel)]="novoPaciente.municipio" />
    </mat-form-field>
    <mat-form-field appearance="fill">
      <mat-label>UF</mat-label>
      <input matInput name="uf" [(ngModel)]="novoPaciente.uf" maxlength="2" />
    </mat-form-field>
    <mat-form-field appearance="fill">
      <mat-label>CEP</mat-label>
      <input matInput name="cep" [(ngModel)]="novoPaciente.cep" maxlength="9" />
    </mat-form-field>
    <mat-form-field appearance="fill">
      <mat-label>Acompanhante</mat-label>
      <input matInput name="acompanhante" [(ngModel)]="novoPaciente.acompanhante" />
    </mat-form-field>
    <mat-form-field appearance="fill">
      <mat-label>Procedência</mat-label>
      <input matInput name="procedencia" [(ngModel)]="novoPaciente.procedencia" />
    </mat-form-field>
    <button mat-raised-button color="primary" type="submit" [disabled]="pacienteForm.invalid">
      {{ pacienteEditando ? 'Atualizar' : 'Salvar' }}
    </button>
  </form>
</div>

<mat-divider></mat-divider>

<div class="table-container">
  <h2>Pacientes cadastrados</h2>
  <table mat-table [dataSource]="pacientes" class="mat-elevation-z2 pacientes-table" *ngIf="pacientes.length; else vazio">
    <ng-container matColumnDef="nome">
      <th mat-header-cell *matHeaderCellDef>Nome</th>
      <td mat-cell *matCellDef="let paciente">{{ paciente.nome }}</td>
    </ng-container>
    <ng-container matColumnDef="mae">
      <th mat-header-cell *matHeaderCellDef>Mãe</th>
      <td mat-cell *matCellDef="let paciente">{{ paciente.mae }}</td>
    </ng-container>
    <ng-container matColumnDef="nascimento">
      <th mat-header-cell *matHeaderCellDef>Nascimento</th>
      <td mat-cell *matCellDef="let paciente">{{ paciente.nascimento | date:'dd/MM/yyyy' }}</td>
    </ng-container>
    <ng-container matColumnDef="sexo">
      <th mat-header-cell *matHeaderCellDef>Sexo</th>
      <td mat-cell *matCellDef="let paciente">{{ paciente.sexo }}</td>
    </ng-container>
    <ng-container matColumnDef="estadoCivil">
      <th mat-header-cell *matHeaderCellDef>Estado Civil</th>
      <td mat-cell *matCellDef="let paciente">{{ paciente.estadoCivil }}</td>
    </ng-container>
    <ng-container matColumnDef="profissao">
      <th mat-header-cell *matHeaderCellDef>Profissão</th>
      <td mat-cell *matCellDef="let paciente">{{ paciente.profissao }}</td>
    </ng-container>
    <ng-container matColumnDef="escolaridade">
      <th mat-header-cell *matHeaderCellDef>Escolaridade</th>
      <td mat-cell *matCellDef="let paciente">{{ paciente.escolaridade }}</td>
    </ng-container>
    <ng-container matColumnDef="raca">
      <th mat-header-cell *matHeaderCellDef>Raça/Cor</th>
      <td mat-cell *matCellDef="let paciente">{{ paciente.raca }}</td>
    </ng-container>
    <ng-container matColumnDef="endereco">
      <th mat-header-cell *matHeaderCellDef>Endereço</th>
      <td mat-cell *matCellDef="let paciente">{{ paciente.endereco }}</td>
    </ng-container>
    <ng-container matColumnDef="bairro">
      <th mat-header-cell *matHeaderCellDef>Bairro</th>
      <td mat-cell *matCellDef="let paciente">{{ paciente.bairro }}</td>
    </ng-container>
    <ng-container matColumnDef="municipio">
      <th mat-header-cell *matHeaderCellDef>Município</th>
      <td mat-cell *matCellDef="let paciente">{{ paciente.municipio }}</td>
    </ng-container>
    <ng-container matColumnDef="uf">
      <th mat-header-cell *matHeaderCellDef>UF</th>
      <td mat-cell *matCellDef="let paciente">{{ paciente.uf }}</td>
    </ng-container>
    <ng-container matColumnDef="cep">
      <th mat-header-cell *matHeaderCellDef>CEP</th>
      <td mat-cell *matCellDef="let paciente">{{ paciente.cep }}</td>
    </ng-container>
    <ng-container matColumnDef="acompanhante">
      <th mat-header-cell *matHeaderCellDef>Acompanhante</th>
      <td mat-cell *matCellDef="let paciente">{{ paciente.acompanhante }}</td>
    </ng-container>
    <ng-container matColumnDef="procedencia">
      <th mat-header-cell *matHeaderCellDef>Procedência</th>
      <td mat-cell *matCellDef="let paciente">{{ paciente.procedencia }}</td>
    </ng-container>
    <ng-container matColumnDef="acoes">
      <th mat-header-cell *matHeaderCellDef>Ações</th>
      <td mat-cell *matCellDef="let paciente">
        <button mat-icon-button color="primary" (click)="editarPaciente(paciente)" aria-label="Editar paciente">
          <mat-icon>edit</mat-icon>
        </button>
        <button mat-icon-button color="warn" (click)="paciente.id !== undefined && removerPaciente(paciente.id)" [disabled]="paciente.id === undefined" aria-label="Remover paciente">
          <mat-icon>delete</mat-icon>
        </button>
      </td>
    </ng-container>
    <tr mat-header-row *matHeaderRowDef="colunas"></tr>
    <tr mat-row *matRowDef="let row; columns: colunas;"></tr>
  </table>
</div>
<ng-template #vazio>
  <p>Nenhum paciente cadastrado.</p>
</ng-template>
