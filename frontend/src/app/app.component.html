<footer class="footer-kralinfo">
  <span>Sistema desenvolvido por <strong>Kralinfo</strong> Soluções Tecnológicas</span>
</footer>
<style>
  .footer-kralinfo {
    width: 100%;
    text-align: center;
    font-size: 0.95em;
    color: #888;
    padding: 16px 0 8px 0;
    background: transparent;
    position: fixed;
    left: 0;
    bottom: 0;
    z-index: 100;
    pointer-events: none;
  }
  body {
    padding-top: 64px;
  }
</style>
<ng-container *ngIf="!isLoginRoute()">
  <!-- Menu hamburguer à esquerda do header principal -->
  <mat-menu #mainMenu="matMenu" class="main-menu-modern">
    <button mat-menu-item routerLink="/pacientes" routerLinkActive="font-bold">
      <mat-icon>person_search</mat-icon>
      <span class="menu-label">Pacientes</span>
    </button>
    <button mat-menu-item routerLink="/relatorios" routerLinkActive="font-bold">
      <mat-icon>bar_chart</mat-icon>
      <span class="menu-label">Relatórios</span>
    </button>
    <button *ngIf="authService.isAdmin || authService.isEditor" mat-menu-item routerLink="/usuarios" routerLinkActive="font-bold">
      <mat-icon>group</mat-icon>
      <span class="menu-label">Usuários</span>
    </button>
  </mat-menu>
  <div class="header-sistema">
    <div class="header-content">
      <div class="logo-container">
        <button mat-icon-button [matMenuTriggerFor]="mainMenu" aria-label="Menu principal" class="menu-hamburguer" style="background:transparent;border:none;padding:0 2px;display:flex;align-items:center;justify-content:center;">
          <span class="menu-google-grid">
            <span class="dot"></span><span class="dot"></span><span class="dot"></span>
            <span class="dot"></span><span class="dot"></span><span class="dot"></span>
            <span class="dot"></span><span class="dot"></span><span class="dot"></span>
          </span>
        </button>
        <div class="logo-container">
          <img src="assets/logo-alianca.svg" alt="Aliança-PE" class="logo-alianca">
          <div class="sistema-info-botao cursor-pointer" tabindex="0" (click)="irParaMenuPrincipal()" (keydown.enter)="irParaMenuPrincipal()" aria-label="Ir para o menu principal">
            <div class="logo-principal">e-Prontuário</div>
            <div class="sistema-descricao">Gerenciamento de Prontuários Eletrônicos</div>
          </div>
        </div>
      </div>
      <div class="user-menu user-menu-fixo">
        <span class="user-info" *ngIf="authService.user">
          {{ authService.user.nome }}
        </span>
        <button mat-icon-button [matMenuTriggerFor]="userMenu" aria-label="Menu do usuário">
          <mat-icon>person_outline</mat-icon>
        </button>
        <button mat-icon-button aria-label="Sobre o sistema" (click)="abrirSobre()">
          <mat-icon>info</mat-icon>
        </button>
        <button mat-icon-button (click)="alternarDarkMode()" aria-label="Alternar tema" style="margin-left: auto;">
          <mat-icon>{{ isDarkMode ? 'dark_mode' : 'light_mode' }}</mat-icon>
        </button>
      </div>
      <mat-menu #userMenu="matMenu">
        <button mat-menu-item (click)="logout()">
          <mat-icon>logout</mat-icon>
          <span>Sair</span>
        </button>
      </mat-menu>
<ng-template #sobreDialog>
  <div class="sobre-modal leve">
    <h2 class="sobre-titulo">Sobre o sistema</h2>
    <div class="sobre-empresa">Sistema desenvolvido por <strong>Kralinfo</strong> Soluções Tecnológicas</div>
    <ul class="sobre-versoes">
      <li>Frontend: <strong>v1.0.0</strong> (Angular 19)</li>
      <li>Backend: <strong>v1.0.0</strong> (Node.js/Express)</li>
    </ul>
    <button mat-stroked-button color="primary" (click)="fecharSobre()">Fechar</button>
  </div>
</ng-template>
<style>
  .sobre-modal.leve {
    min-width: 260px;
    padding: 16px 8px 12px 8px;
    text-align: center;
    font-size: 0.98em;
    background: #fff;
    box-shadow: 0 2px 8px rgba(0,0,0,0.04);
    border-radius: 8px;
  }
  .user-menu-fixo {
    position: absolute;
    top: 50%;
    right: 24px;
    height: auto;
    display: flex;
    align-items: center;
    transform: translateY(-50%);
    z-index: 101;
  }
  .sobre-titulo {
    font-size: 1.08em;
    font-weight: 600;
    margin-bottom: 8px;
    color: #444;
  }
  .sobre-empresa {
    font-size: 0.97em;
    color: #888;
    margin-bottom: 8px;
  }
  .sobre-versoes {
    list-style: none;
    padding: 0;
    margin: 0 0 12px 0;
    font-size: 0.95em;
    color: #666;
  }
  .sobre-versoes li {
    margin-bottom: 2px;
  }
  .user-info {
    font-size: 14px;
    font-weight: 300;
    color: white;
    margin-right: 2px;
    margin-left: 0;
    display: inline-block;
    vertical-align: middle;
    font-family: 'Segoe UI', 'Roboto', 'Arial', sans-serif;
    letter-spacing: 0.2px;
  }
  .user-menu-fixo button[mat-icon-button] {
    margin-left: 0;
    margin-right: 0;
    vertical-align: middle;
  }
  .main-menu-modern .mat-menu-content {
    padding: 12px 0;
    background: linear-gradient(135deg, #e3eafe 0%, #f7f7fa 100%);
    border-radius: 12px;
    box-shadow: 0 8px 32px 0 rgba(43,105,242,0.10), 0 1.5px 0 0 #fff inset;
  }
  .main-menu-modern .mat-menu-item {
    border-radius: 8px;
    margin: 4px 8px;
    padding: 10px 18px;
    font-size: 1.08em;
    font-weight: 500;
    color: #2b69f2;
    transition: background 0.18s, color 0.18s;
  }
  .main-menu-modern .mat-menu-item:hover {
    background: #e3eafe;
    color: #1741a6;
  }
  .main-menu-modern .mat-icon {
    font-size: 1.5em !important;
    margin-right: 10px;
    color: #2b69f2 !important;
  }
  .menu-label {
    letter-spacing: 0.2px;
  }
  .menu-google-grid {
    display: grid;
    grid-template-columns: repeat(3, 7px);
    grid-template-rows: repeat(3, 7px);
    gap: 4px;
    width: 27px;
    height: 27px;
  }
  .menu-google-grid .dot {
    width: 7px;
    height: 7px;
    border-radius: 50%;
    background: #bdbdbd;
    transition: background 0.2s;
  }
  .menu-hamburguer:hover .dot {
    background: #2b69f2;
  }
</style>
    </div>
  </div>
</ng-container>
<router-outlet></router-outlet>
